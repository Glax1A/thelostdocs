<!DOCTYPE html>
<html>
    <head>
        <title>Find your location by choosing your favourite things!</title>
        <meta charset="UTF-8">
        <meta name="description" content="A site to do random stuff if you're bored!">
        <meta name="keywords" content="fun, neal.fun, boredbutton, bored, have fun,">
        <meta name="author" content="NicoWebCreations">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/x-icon" href="favicon.png">
        <style>
        body,h1,h2,h3,h4,h5,h6 {font-family: "Raleway", sans-serif}
        </style>
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6501023040597198"
            crossorigin="anonymous"></script>

            <script src="https://api.opencagedata.com/geocode/v1/js?key=2e5f5c49db3e4b4f9a8a9aa2a06dad74"></script>

    </head>
    <body>
      <button id="get-location">Get Location</button>
      <p id="address"></p>
      
      <script>
        const getLocationButton = document.getElementById('get-location');
        const addressElement = document.getElementById('address');
      
        getLocationButton.addEventListener('click', function() {
          navigator.geolocation.getCurrentPosition(function(position) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
      
            // Use a reverse geocoding service to get the address from the latitude and longitude
            fetch(`https://api.opencagedata.com/geocode/v1/json?q=${latitude}+${longitude}&key=2e5f5c49db3e4b4f9a8a9aa2a06dad74`)
              .then(response => response.json())
              .then(data => {
                // Display the address in the address element
                addressElement.innerText = data.results[0].formatted;
              });
          });
        });
      </script>
      <div id="map"></div>

      <style>
        #map {
          height: 400px;
          width: 100%;
        }
      </style>
      
      <script>
        // Create a new OpenLayers map and add it to the page
        var map = new ol.Map({
          target: 'map',
          layers: [
            new ol.layer.Tile({
              source: new ol.source.OSM()
            })
          ],
          view: new ol.View({
            center: [0, 0],
            zoom: 2
          })
        });


        map.getView().setCenter([LONGITUDE, LATITUDE]);

var marker = new ol.Overlay({
  position: [LONGITUDE, LATITUDE],
  element: document.getElementById('marker')
});
map.addOverlay(marker);

const API_KEY = '2e5f5c49db3e4b4f9a8a9aa2a06dad74';
const latitude = LATITUDE;
const longitude = LONGITUDE;

const url = `https://api.opencagedata.com/geocode/v1/json?q=${latitude}+${longitude}&key=${2e5f5c49db3e4b4f9a8a9aa2a06dad74}`;

fetch(url)
  .then(response => response.json())
  .then(data => {
    // Here you can access the data returned by the API
    console.log(data);
  })
  .catch(error => {
    // Here you can handle any errors that may occur
    console.error(error);
  });

  const map = new ol.Map({
  target: 'map',
  layers: [
    new ol.layer.Tile({
      source: new ol.source.OSM()
    }),
    new ol.layer.Vector({
      source: new ol.source.Vector({
        features: [new ol.Feature({
          geometry: new ol.geom.Point(ol.proj.fromLonLat([longitude, latitude]))
        })]
      }),
      style: new ol.style.Style({
        image: new ol.style.Icon({
          src: 'marker.png'
        })
      })
    })
  ],
  view: new ol.View({
    center: ol.proj.fromLonLat([longitude, latitude]),
    zoom: 10
  })
});
      </script>
      
      </body>
</html>